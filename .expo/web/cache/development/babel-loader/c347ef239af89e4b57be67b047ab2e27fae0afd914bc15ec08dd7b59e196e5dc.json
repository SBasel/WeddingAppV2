{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nexport var uploadMedia = function () {\n  var _ref = _asyncToGenerator(function* (uri, type) {\n    var mimeType = type === 'video' ? 'video/mp4' : 'image/jpg';\n    var base64Data = `data:${mimeType};base64,${yield toBase64(uri)}`;\n    var data = {\n      data: base64Data\n    };\n    try {\n      var response = yield fetch('https://www.sbdci.de/kpw/upload.php', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n      var text = yield response.text();\n      console.log(text);\n    } catch (error) {\n      console.error(\"Fehler beim Hochladen des Mediums\", error);\n    }\n  });\n  return function uploadMedia(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar toBase64 = function () {\n  var _ref2 = _asyncToGenerator(function* (uri) {\n    var response = yield fetch(uri);\n    var blob = yield response.blob();\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        return resolve(reader.result.split(',')[1]);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  });\n  return function toBase64(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["uploadMedia","_ref","_asyncToGenerator","uri","type","mimeType","base64Data","toBase64","data","response","fetch","method","headers","body","JSON","stringify","text","console","log","error","_x","_x2","apply","arguments","_ref2","blob","Promise","resolve","reject","reader","FileReader","onloadend","result","split","onerror","readAsDataURL","_x3"],"sources":["/home/dci-student/DCIFolder/WAppV2/WeddingApp2.0/comp/Camera/UploadMedia.js"],"sourcesContent":["export const uploadMedia = async (uri, type) => {\n    let mimeType = type === 'video' ? 'video/mp4' : 'image/jpg'; // Annahme, dass alle Videos im MP4-Format sind\n    let base64Data = `data:${mimeType};base64,${await toBase64(uri)}`;\n\n    let data = {\n        data: base64Data\n    };\n\n    try {\n        const response = await fetch('https://www.sbdci.de/kpw/upload.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        });\n        const text = await response.text();\n        console.log(text);\n    } catch (error) {\n        console.error(\"Fehler beim Hochladen des Mediums\", error);\n    }\n}\n\nconst toBase64 = async (uri) => {\n    const response = await fetch(uri);\n    const blob = await response.blob();\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result.split(',')[1]);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n    });\n};\n\n"],"mappings":";AAAA,OAAO,IAAMA,WAAW;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,GAAG,EAAEC,IAAI,EAAK;IAC5C,IAAIC,QAAQ,GAAGD,IAAI,KAAK,OAAO,GAAG,WAAW,GAAG,WAAW;IAC3D,IAAIE,UAAU,GAAI,QAAOD,QAAS,WAAQ,MAAQE,QAAQ,CAACJ,GAAG,CAAE,EAAC;IAEjE,IAAIK,IAAI,GAAG;MACPA,IAAI,EAAEF;IACV,CAAC;IAED,IAAI;MACA,IAAMG,QAAQ,SAASC,KAAK,CAAC,qCAAqC,EAAE;QAChEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,IAAI;MAC7B,CAAC,CAAC;MACF,IAAMQ,IAAI,SAASP,QAAQ,CAACO,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOG,KAAK,EAAE;MACZF,OAAO,CAACE,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IAC7D;EACJ,CAAC;EAAA,gBArBYnB,WAAWA,CAAAoB,EAAA,EAAAC,GAAA;IAAA,OAAApB,IAAA,CAAAqB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAqBvB;AAED,IAAMhB,QAAQ;EAAA,IAAAiB,KAAA,GAAAtB,iBAAA,CAAG,WAAOC,GAAG,EAAK;IAC5B,IAAMM,QAAQ,SAASC,KAAK,CAACP,GAAG,CAAC;IACjC,IAAMsB,IAAI,SAAShB,QAAQ,CAACgB,IAAI,CAAC,CAAC;IAClC,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;MACpC,IAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,SAAS,GAAG;QAAA,OAAMJ,OAAO,CAACE,MAAM,CAACG,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MAAA;MAC7DJ,MAAM,CAACK,OAAO,GAAGN,MAAM;MACvBC,MAAM,CAACM,aAAa,CAACV,IAAI,CAAC;IAC9B,CAAC,CAAC;EACN,CAAC;EAAA,gBATKlB,QAAQA,CAAA6B,GAAA;IAAA,OAAAZ,KAAA,CAAAF,KAAA,OAAAC,SAAA;EAAA;AAAA,GASb"},"metadata":{},"sourceType":"module","externalDependencies":[]}