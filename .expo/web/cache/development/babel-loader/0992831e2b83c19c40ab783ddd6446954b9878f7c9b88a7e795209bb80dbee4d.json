{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { FontAwesome } from '@expo/vector-icons';\nimport * as ImagePicker from 'expo-image-picker';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function VideoPicker() {\n  var navigation = useNavigation();\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    progress = _useState2[0],\n    setProgress = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isUploading = _useState4[0],\n    setIsUploading = _useState4[1];\n  var openVideoLibrary = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var permissionResult = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (!permissionResult.granted) {\n        Alert.alert('Permission to access media library is required!');\n        return;\n      }\n      var pickerResult = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Videos\n      });\n      if (pickerResult.canceled) {\n        return;\n      }\n      var videoUri = pickerResult.uri;\n      console.log(\"Video loaded from library!\");\n      console.log(videoUri);\n      uploadVid(videoUri);\n    });\n    return function openVideoLibrary() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var uploadVid = function () {\n    var _ref2 = _asyncToGenerator(function* (uri) {\n      var videoData = `data:video/mp4;base64,${yield toBase64(uri)}`;\n      var data = {\n        video: videoData\n      };\n      try {\n        var response = yield fetch('https://www.sbdci.de/kpw/uploadvid.php', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        });\n        var text = yield response.text();\n        console.log(text);\n      } catch (error) {\n        console.error(\"Fehler beim Hochladen des Videos\", error);\n      }\n    });\n    return function uploadVid(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var toBase64 = function () {\n    var _ref3 = _asyncToGenerator(function* (uri) {\n      var response = yield fetch(uri);\n      var blob = yield response.blob();\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          return resolve(reader.result.split(',')[1]);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n      });\n    });\n    return function toBase64(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(TouchableOpacity, {\n    style: styles.iconButton,\n    onPress: openVideoLibrary,\n    children: _jsx(FontAwesome, {\n      name: \"video-camera\",\n      size: 32\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  iconButton: {\n    padding: 10\n  }\n});","map":{"version":3,"names":["React","useState","TouchableOpacity","StyleSheet","Alert","Modal","View","Text","FontAwesome","ImagePicker","useNavigation","jsx","_jsx","VideoPicker","navigation","_useState","_useState2","_slicedToArray","progress","setProgress","_useState3","_useState4","isUploading","setIsUploading","openVideoLibrary","_ref","_asyncToGenerator","permissionResult","requestMediaLibraryPermissionsAsync","granted","alert","pickerResult","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Videos","canceled","videoUri","uri","console","log","uploadVid","apply","arguments","_ref2","videoData","toBase64","data","video","response","fetch","method","headers","body","JSON","stringify","text","error","_x","_ref3","blob","Promise","resolve","reject","reader","FileReader","onloadend","result","split","onerror","readAsDataURL","_x2","style","styles","iconButton","onPress","children","name","size","create","padding"],"sources":["/home/dci-student/DCIFolder/WAppV2/WeddingApp2.0/comp/Camera/VideoPicker.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { TouchableOpacity, StyleSheet, Alert, Modal, View, Text } from 'react-native';\nimport { FontAwesome } from '@expo/vector-icons'; \nimport * as ImagePicker from 'expo-image-picker';\nimport { useNavigation } from '@react-navigation/native';\n\nexport function VideoPicker() {\n    const navigation = useNavigation();\n    const [progress, setProgress] = useState(0); // Fortschritt in Prozent\n    const [isUploading, setIsUploading] = useState(false); // Zustand des Uploads\n\n    const openVideoLibrary = async () => {\n        const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (!permissionResult.granted) {\n            Alert.alert('Permission to access media library is required!');\n            return;\n        }\n\n        const pickerResult = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Videos // Hier wählen wir nur Videos aus.\n        });\n        \n        if (pickerResult.canceled) {\n            return;\n        }\n\n        const videoUri = pickerResult.uri;\n        console.log(\"Video loaded from library!\");\n        console.log(videoUri);\n\n        uploadVid(videoUri); // Video nach Auswahl hochladen\n\n        // Hier können Sie navigieren oder etwas anderes mit dem Video tun.\n        // Zum Beispiel:\n        // navigation.navigate('VideoEditor', { videoUri: videoUri });\n    };\n\n    const uploadVid = async (uri) => {\n        let videoData = `data:video/mp4;base64,${await toBase64(uri)}`; \n\n        let data = {\n            video: videoData\n        };\n\n        try {\n            const response = await fetch('https://www.sbdci.de/kpw/uploadvid.php', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(data),\n            });\n            const text = await response.text();\n            console.log(text);\n        } catch (error) {\n            console.error(\"Fehler beim Hochladen des Videos\", error);\n        }\n    };\n\n    const toBase64 = async (uri) => {\n        const response = await fetch(uri);\n        const blob = await response.blob();\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => resolve(reader.result.split(',')[1]);\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        });\n    };\n\n    return (\n        <TouchableOpacity style={styles.iconButton} onPress={openVideoLibrary}>\n            <FontAwesome name=\"video-camera\" size={32} />\n        </TouchableOpacity>\n    );\n}\n\nconst styles = StyleSheet.create({\n    iconButton: {\n        padding: 10\n    }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}